# –°—Ç–∞—Ç—É—Å Airflow - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. Airflow —Å–µ—Ä–≤–∏—Å
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **URL**: http://localhost:8081
- **–õ–æ–≥–∏–Ω**: `admin`
- **–ü–∞—Ä–æ–ª—å**: `uSv9mh8FRTuEYz7z`

### 2. –¢–µ—Å—Ç–æ–≤—ã–π DAG
- **–ù–∞–∑–≤–∞–Ω–∏–µ**: `test_wait_dag`
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω (–Ω–µ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –¢–µ—Å—Ç–æ–≤—ã–π DAG —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º 100 —Å–µ–∫—É–Ω–¥
- **–ó–∞–¥–∞—á–∏**:
  - `wait_100_seconds` - –æ–∂–∏–¥–∞–µ—Ç 100 —Å–µ–∫—É–Ω–¥
  - `print_completion` - –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
  - `show_info` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ CLI
```bash
# –°–ø–∏—Å–æ–∫ DAG
docker exec data-orchestrator-airflow airflow dags list

# –ó–∞–ø—É—Å–∫ DAG
docker exec data-orchestrator-airflow airflow dags trigger test_wait_dag

# –°—Ç–∞—Ç—É—Å DAG
docker exec data-orchestrator-airflow airflow dags state test_wait_dag <execution_date>
```

### 4. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–î–æ—Å—Ç—É–ø–µ–Ω**: ‚úÖ http://localhost:8081
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: —Ä–∞–±–æ—Ç–∞–µ—Ç
- **DAG –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è**: ‚úÖ –≤ —Å–ø–∏—Å–∫–µ DAG

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–ü—Ä–æ–±–ª–µ–º–∞**: REST API —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–°—Ç–∞—Ç—É—Å**: ‚ùå API endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç 401 Unauthorized
- **–û–±—Ö–æ–¥–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ CLI –∫–æ–º–∞–Ω–¥—ã

### 2. Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **–ü—Ä–æ–±–ª–µ–º–∞**: Airflow Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "DAG –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
- **–ü—Ä–∏—á–∏–Ω–∞**: API –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- **–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

### 3. URL –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- **–ü—Ä–æ–±–ª–µ–º–∞**: –°—Å—ã–ª–∫–∏ –≤–µ–¥—É—Ç –Ω–∞ `http://airflow:8080/home` (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π URL)
- **–†–µ—à–µ–Ω–∏–µ**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ - —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `http://localhost:8081`

## üöÄ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ó–∞–ø—É—Å–∫ DAG
```bash
# 1. –ó–∞–ø—É—Å–∫ DAG
docker exec data-orchestrator-airflow airflow dags trigger test_wait_dag

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ (—á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥)
docker exec data-orchestrator-airflow airflow dags state test_wait_dag 2025-09-27T07:49:44+00:00

# 3. –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á
docker exec data-orchestrator-airflow airflow tasks list test_wait_dag

# 4. –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á
docker exec data-orchestrator-airflow airflow tasks states-for-dag-run test_wait_dag manual__2025-09-27T07:49:44+00:00
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
DAG –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ:
- ‚úÖ `wait_100_seconds` - –æ–∂–∏–¥–∞–µ—Ç 100 —Å–µ–∫—É–Ω–¥
- ‚úÖ `print_completion` - –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏  
- ‚úÖ `show_info` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏
- ‚úÖ –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å: `success`

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–∫–ª—é—á–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è API
# –î–æ–±–∞–≤–∏—Ç—å –≤ docker-compose.yml:
- AIRFLOW__API__AUTH_BACKENDS=airflow.api.auth.backend.deny_all

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å JWT —Ç–æ–∫–µ–Ω—ã
# –î–æ–±–∞–≤–∏—Ç—å –≤ docker-compose.yml:
- AIRFLOW__API__AUTH_BACKENDS=airflow.api.auth.backend.jwt
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å frontend
- –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ API
- –ü–æ–∫–∞–∑–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è DAG
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Airflow

### 3. –£–ª—É—á—à–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
- –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ì–û–¢–û–í–ê

**Airflow –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω**:
- ‚úÖ –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω
- ‚úÖ DAG –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ CLI —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ DAG —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

**–î–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, –Ω–æ **–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–∞**.
