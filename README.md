# Data Orchestrator

–ü—Ä–æ—Å—Ç–æ–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –∏ –ø—Ä–∏—ë–º–Ω–∏–∫–∞–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —á–∞–Ω–∫–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏**: CSV, JSON, XML (–∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞), PostgreSQL (–ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
- **–ü—Ä–∏—ë–º–Ω–∏–∫–∏**: –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (–ø–µ—Ä–≤—ã–µ —Å—Ç—Ä–æ–∫–∏), —Ñ–∞–π–ª—ã CSV/JSON/XML, PostgreSQL
- **–ü–µ—Ä–µ–Ω–æ—Å —á–∞–Ω–∫–∞–º–∏**: —É–∫–∞–∂–∏—Ç–µ —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –Ω–∞ —à–∞–≥)
- üé® **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π React –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** —Å –∫—Ä–∞—Å–∏–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º
- üìÅ **Drag & Drop** –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- ‚ö° **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä** –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏
- üìä **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä** –¥–∞–Ω–Ω—ã—Ö (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω 10 —Å—Ç—Ä–æ–∫–∞–º–∏ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
- üîÑ **–í–∞–ª–∏–¥–∞—Ü–∏—è** –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- üìù **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π** –¥–ª—è CSV —Ñ–∞–π–ª–æ–≤ (—Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- üóÑÔ∏è **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL** —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- üîç **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü** –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- üèóÔ∏è **–ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –°–£–ë–î
- üß† **–£–º–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å—Ç–æ–ª–±—Ü–æ–≤ PostgreSQL
- üéØ **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ –ø—Ä–∏—ë–º–Ω–∏–∫–∞
- üîß **–£—Å–ª–æ–≤–Ω—ã–µ –ø–æ–ª—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω—ã
- REST API –Ω–∞ FastAPI.
- Docker –∏ docker-compose –¥–ª—è –∑–∞–ø—É—Å–∫–∞.
- –¢–µ—Å—Ç—ã –Ω–∞ pytest.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞
- Backend (FastAPI): `backend/app`
  - –ê–±—Å—Ç—Ä–∞–∫—Ü–∏–∏: `app/services/base.py` (`DataSource`, `DataSink`), –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞–Ω–∫–æ–≤
  - –ò—Å—Ç–æ—á–Ω–∏–∫–∏: `CSVSource`, `JSONSource`, `XMLSource`
  - –ü—Ä–∏—ë–º–Ω–∏–∫–∏: `CSVFileSink`, `JSONFileSink`, `XMLFileSink`, `PreviewSink`
  - API: `POST /upload` (–ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä), `POST /transfer` (–ø–µ—Ä–µ–Ω–æ—Å —Å –≤—ã–±–æ—Ä–æ–º —Ç–∏–ø–æ–≤)
- Frontend: React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å TypeScript –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º UI
- Docker: `backend/Dockerfile`, `frontend/Dockerfile`, `docker-compose.yml`
- –¢–µ—Å—Ç—ã: `backend/tests`

## –ó–∞–ø—É—Å–∫
```bash
cd /Users/marina/data
docker compose up -d --build
```

- –§—Ä–æ–Ω—Ç–µ–Ω–¥: http://localhost:3000
- –ë—ç–∫–µ–Ω–¥: http://localhost:8000/health

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö**:
   - CSV/JSON/XML —Ñ–∞–π–ª: –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞
   - PostgreSQL: –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (—Ö–æ—Å—Ç, –ø–æ—Ä—Ç, –±–∞–∑–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –ø–∞—Ä–æ–ª—å, —Ç–∞–±–ª–∏—Ü–∞)
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –¥–ª—è CSV (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ;)
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∏—ë–º–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö**:
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä: –ø–æ–∫–∞–∂–µ—Ç –ø–µ—Ä–≤—ã–µ 10 —Å—Ç—Ä–æ–∫
   - CSV/JSON/XML —Ñ–∞–π–ª: —Å–æ—Ö—Ä–∞–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
   - PostgreSQL: –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –¥–ª—è CSV –∏ —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞
3. **–ù–∞–∂–º–∏—Ç–µ ¬´–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–µ–Ω–æ—Å¬ª** –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
4. **–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞

    **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:**
    - üéØ **–ú–æ–¥—É–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏** - –∫–∞–∂–¥–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ —Å–≤–æ–µ–π –∫–∞—Ä—Ç–æ—á–∫–µ
    - üîß **–£–º–Ω—ã–µ –ø–æ–ª—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CSV –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è CSV —Ñ–∞–π–ª–æ–≤
    - üìÅ **–£—Å–ª–æ–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** - —Ñ–∞–π–ª –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —Ñ–∞–π–ª–æ–≤—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
    - üóÑÔ∏è **–û—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ë–î** - —É–¥–æ–±–Ω—ã–π –≤–≤–æ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ PostgreSQL
    - üîÑ **–î–≤–æ–π–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏** - –æ—Ç–¥–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ –ø—Ä–∏—ë–º–Ω–∏–∫–∞ –ë–î
    - üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–Ω–æ—Å–æ–º
    - üß† **–£–º–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ INTEGER, VARCHAR, DATE, BOOLEAN –∏ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤

### API
- **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–æ–≤**:
  - `POST /upload` form-data: `file` (—Ñ–∞–π–ª), `delimiter` (str, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ";"). –û—Ç–≤–µ—Ç: `{ headers, rows }`
- **–ü–µ—Ä–µ–Ω–æ—Å —Ñ–∞–π–ª–æ–≤**:
  - `POST /transfer` form-data: `source_type` (csv|json|xml), `sink_type` (preview|csv|json|xml), `chunk_size` (int), `delimiter` (str), `file` (—Ñ–∞–π–ª)
  - –û—Ç–≤–µ—Ç: `{ result, out_path, headers }`
- **–†–∞–±–æ—Ç–∞ —Å PostgreSQL**:
  - `POST /database/connect` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - `POST /database/tables` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–∞–±–ª–∏—Ü
  - `POST /database/schema` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü—ã
  - `POST /database/query` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–∞
  - `POST /transfer/to-database` - –ø–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö –≤ PostgreSQL
    - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `source_type`, `file`, `sink_connection_string`, `sink_table_name`, `sink_mode`, `chunk_size`, `delimiter`, `database_type`

## –¢–µ—Å—Ç—ã
–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ:
```bash
cd /Users/marina/data
docker compose exec backend pip install -r /app/requirements.txt
docker compose exec backend pytest -q
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- –ò—Å—Ç–æ—á–Ω–∏–∫–∏ JSON: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –º–∞—Å—Å–∏–≤—ã –æ–±—ä–µ–∫—Ç–æ–≤ –∏–ª–∏ `{"items": [...]}`; –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤ –º–∞—Å—Å–∏–≤–æ–≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±—É–¥—É—Ç `col1..colN`.
- –ò—Å—Ç–æ—á–Ω–∏–∫–∏ XML: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—â–µ—Ç—Å—è —Ç–µ–≥ `item` (–∏–ª–∏ –±–µ—Ä—É—Ç—Å—è –ø—Ä—è–º—ã–µ –¥–µ—Ç–∏ –∫–æ—Ä–Ω—è), –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –∏–∑ –∏–º—ë–Ω –¥–æ—á–µ—Ä–Ω–∏—Ö —Ç–µ–≥–æ–≤.
- –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏—ë–º–Ω–∏–∫–∏ –ø–∏—à—É—Ç –≤ `/tmp` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±—ç–∫–µ–Ω–¥–∞.


